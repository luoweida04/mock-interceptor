"use strict";const e=require("../assets/msg-Bo3mMTNd.js"),r={IS_ACTIVE:"mockInterceptorActive",RULES:"interceptorRules",SCRIPT:"mockInterceptor"},c=()=>{console.log("document",document);const o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",chrome.runtime.getURL("mockInterceptor/mockInterceptor.js")),document.documentElement.appendChild(o),o.addEventListener("load",()=>{chrome.storage.local.get([r.IS_ACTIVE,r.RULES],t=>{postMessage({type:e.EMsgType.MockInterceptor,to:e.EMsgTo.MockInterceptor,isActive:t[r.IS_ACTIVE],rules:t[r.RULES]})})}),o.addEventListener("error",t=>{alert(`拦截器加载出错: ${t}`)}),chrome.runtime.onMessage.addListener(t=>{t.type!==e.EMsgType.MockInterceptor||t.to!==e.EMsgTo.Content||postMessage({...t,to:e.EMsgTo.MockInterceptor})}),chrome.runtime.sendMessage(chrome.runtime.id,{type:e.EMsgType.MockInterceptor,to:e.EMsgTo.Background,contentScriptLoaded:!0}),chrome.runtime.sendMessage(chrome.runtime.id,{type:e.EMsgType.MockInterceptor,to:e.EMsgTo.Client,contentScriptLoaded:!0})};c();
